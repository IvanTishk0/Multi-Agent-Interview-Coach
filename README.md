# Multi-Agent Interview Coach: Система технического интервью на базе LLM

## Обзор проекта

Проект **Multi-Agent Interview Coach** представляет собой продвинутую систему для проведения автоматизированных технических интервью. Система построена на архитектуре многоагентного взаимодействия, где каждый агент выполняет специализированную роль (интервьюер, наблюдатель, фактчекер, генератор отчета), обеспечивая глубокий и адаптивный процесс оценки кандидата.

Основная цель проекта — предоставить инструмент, способный проводить собеседования, максимально приближенные к реальным, включая адаптацию сложности вопросов в реальном времени и точное выявление пробелов в знаниях и ложных утверждений (галлюцинаций).

## Обязательные свойства системы (Требования ТЗ)

### 1. Ролевая специализация (Role Specialization)

Система состоит из четырех специализированных агентов, каждый из которых выполняет строго определенную функцию, исключая дублирование и конфликты ответственности:

| Агент | Роль | Принцип специализации |
| :--- | :--- | :--- |
| **InterviewerAgent** | Ведущий диалог | Задает вопросы и управляет ходом беседы. **Не занимается** анализом корректности ответов. |
| **MentorAgent (Observer)** | Аналитик/Критик | Анализирует ответы кандидата и дает рекомендации. **Не ведет** диалог и **не проверяет** факты. |
| **FactCheckerAgent** | Проверка фактов | Проводит строгую проверку фактических утверждений. **Не участвует** в диалоге и **не генерирует** отчет. |
| **FeedbackGeneratorAgent** | Менеджер/Оценщик | Генерирует финальный отчет и вердикт. **Не участвует** в процессе интервью. |

### 2. Скрытая рефлексия (Hidden Reflection)

Система использует этап "внутреннего диалога" (рефлексии) перед генерацией ответа кандидату. Этот процесс невидим для кандидата, но полностью логируется:

*   **Механизм**: После ответа кандидата, **MentorAgent** анализирует его и формирует **скрытую инструкцию** для **InterviewerAgent**.
*   **Логирование**: В логах (поле `internal_thoughts`) фиксируется оценка MentorAgent, например:
    > `[Observer]: Кандидат ответил неуверенно, но верно. [Interviewer]: Нужно задать уточняющий вопрос по этой же теме, чтобы проверить глубину знаний.`

### 3. Сохранение контекста (Context Awareness)

Система поддерживает контекст диалога, чтобы обеспечить связность и избежать повторов:

*   **История сообщений**: Агентам передается история последних 3-6 сообщений для поддержания логики беседы.
*   **Отслеживание тем**: Система отслеживает **затронутые темы** (`topics_covered`) и гарантирует, что **InterviewerAgent** не задаст вопрос по теме, которая уже была обсуждена.

### 4. Адаптивность (Adaptability)

Сложность вопросов меняется динамически на основе производительности кандидата, используя 10-уровневую шкалу сложности:

*   **Усложнение**: Если кандидат отвечает идеально (`correct_streak` растет), **MentorAgent** рекомендует `increase`, и **InterviewerAgent** переходит на более высокий уровень сложности.
*   **Упрощение/Подсказка**: Если кандидат "плывет" или признает незнание, **MentorAgent** рекомендует `decrease`, и **InterviewerAgent** упрощает вопрос или дает подсказку.

### 5. Устойчивость к вбросам (Robustness)

Система способна обрабатывать нежелательные сценарии, возвращая интервью в профессиональное русло:

*   **Off-topic**: Если кандидат пытается сменить тему, **MentorAgent** помечает это, и **InterviewerAgent** вежливо возвращает беседу к техническим вопросам.
*   **Галлюцинации**: Уверенные ответы с ложными фактами (например, "Python 4.0") немедленно запускают **FactCheckerAgent**. Система **не соглашается** с ложным утверждением, а вежливо указывает на ошибку и предоставляет правильную информацию.

## Требования к Финальному Фидбэку (Feedback Structure)

После команды "Стоп интервью" или завершения вопросов, **FeedbackGeneratorAgent** создает структурированный отчет, который является полезным артефактом для обучения и принятия решений.

### А. Вердикт (Decision)

| Параметр | Описание |
| :--- | :--- |
| **Grade** | Фактический уровень кандидата (Junior / Middle / Senior) на основе ответов. |
| **Hiring Recommendation** | Рекомендация по найму (Hire / No Hire / Strong Hire). |
| **Confidence Score** | Насколько система уверена в оценке (0-100%). |

### Б. Анализ Hard Skills (Technical Review)

Раздел содержит детальный обзор технических знаний, выявленных в ходе интервью.

*   **Confirmed Skills**: Список тем, по которым кандидат дал точные и уверенные ответы.
*   **Knowledge Gaps**: Список тем, где были допущены ошибки или кандидат сказал "не знаю". **Критически важно**: Для каждого пробела приводится **подробный правильный ответ** на вопрос, который кандидат завалил.

### В. Анализ Soft Skills & Communication

Оценка коммуникативных навыков кандидата:

*   **Clarity**: Оценка ясности изложения мыслей.
*   **Honesty**: Оценка честности (пытался ли выкрутиться или честно признал незнание).
*   **Engagement**: Оценка вовлеченности (задавал ли встречные вопросы, поддерживал ли диалог).

### Г. Персональный Roadmap (Next Steps)

План развития для кандидата:

*   **Topics to Improve**: Список конкретных тем/технологий, которые нужно подтянуть (на основе выявленных пробелов).
*   **Resources**: Ссылки на документацию или статьи по этим темам для самостоятельного изучения.

***

## Установка и запуск

### Требования

*   Python 3.9+
*   Установленные зависимости (см. `requirements.txt`)
*   API ключ для LLM (например, Groq или OpenAI)

### Настройка API ключа

```bash
export GROQ_API_KEY='ваш_api_ключ'
```

### Запуск

1.  Установите зависимости:
    ```bash
    pip install -r requirements.txt
    ```
2.  Запустите интерактивный режим:
    ```bash
    python interview_system.py --interactive
    ```
3.  Запустите демо-режим с готовым сценарием:
    ```bash
    python interview_system.py --demo
    ```

## Примеры работы

Ниже приведены примеры того, как система обрабатывает ответы кандидата, проводит внутреннюю рефлексию и формирует итоговый отчет.

### 1. Процесс интервью и скрытая рефлексия

Система логирует не только диалог, но и "мысли" агентов-наблюдателей. Это позволяет понять, почему система приняла то или иное решение (например, сменила тему или уровень сложности).

**Пример из лога:**
> **Кандидат:** Список в Python - это изменяемая упорядоченная коллекция элементов. Основные методы: append(), pop(), insert()...
>
> **Внутренняя рефлексия (Observer):**
> *Анализ: Кандидат начал с описания списков, но затем резко поменял тему на словари, что не связано с вопросом. Ответ размытый и неуверенный. Корректность: 20%. Рекомендация: Похвалить за попытку, но вернуть к конкретному вопросу.*
>
> **Интервьюер:** Хорошая попытка! Однако, я заметил, что ты ушел от темы. Давай вернемся к написанию функции для фильтрации строк...

### 2. Обработка галлюцинаций (Fact-Checking)

Если кандидат уверенно утверждает неверные факты, подключается **FactCheckerAgent**, который блокирует распространение ошибки.

**Пример обработки "вброса":**
> **Кандидат:** Я слышал, что в Python 4.0 циклы `for` заменят на нейронные связи, поэтому я их не учу.
>
> **FactChecker (Internal Alert):**
> *ALERT: Пользователь галлюцинирует. Python 4.0 не существует. Циклы for остаются базовой конструкцией. Это критическая ошибка знаний (Red Flag).*
>
> **Интервьюер:** Алекс, я должен поправить: Python 4.0 не существует, а циклы `for` никуда не исчезнут. Давай все же попробуем реализовать задачу с их помощью.

### 3. Финальный отчет (Feedback Report)

После завершения интервью система генерирует подробный отчет. В фиксированном формате логов (`fixed_format_log_*.json`) поле `final_feedback` теперь представлено в виде структурированного **Markdown**, что удобно для чтения и последующего экспорта.

**Пример структуры фидбэка в логах:**

```markdown
### 1. Вердикт
- **Оценка (Grade):** Middle
- **Рекомендация:** No Hire
- **Уверенность системы:** 40%

### 2. Технический анализ
#### Подтвержденные навыки:
- Python, SQL, Git

#### Пробелы в знаниях:
- **Наследование в Python**
  - *Вопрос:* Какой из следующих классов является дочерним классом класса Vehicle?
  - *Ответ кандидата:* Привет. Я Алекс...

### 3. Soft Skills
- **Ясность изложения:** 2/5
- **Честность:** 1/5
- **Вовлеченность:** 3/5

### 4. План развития
#### Что подтянуть:
- Наследование в Python
- Функции в Python
```
